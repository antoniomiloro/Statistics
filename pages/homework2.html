<!DOCTYPE html>
<html>
    <head>
        <title>Statistics</title>
        <meta http-equiv='cache-control' content='no-cache'> 
        <meta http-equiv='expires' content='0'> 
        <meta http-equiv='pragma' content='no-cache'>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    </head>
    <body>
        <h1>Esercizio 1</h1> 
        <h4>JavaScript</h4>
        <head>
            <script>
                
                const csvUrl = 'https://noemi2001.github.io/statistics/HW2/dataset.csv';
        
                fetch(csvUrl)
                .then(response => response.text())
                .then(data => {
                    const lines = data.split('\n');
                    const result = [];
                    const headers = lines[0].split(',');
                    
                    joinLines = 0;
        
                    const columnData = {};
                    const distribuzioneCongiunta = {};
        
                    headers.forEach(header => {
                    columnData[header] = {};
                    });
        
                    for (let i = 1; i < lines.length; i++) {
                        const currentLine = lines[i].split(',');
                        const age = currentLine[headers.indexOf("Age")];
                        const sport = currentLine[headers.indexOf("Sports")];
        
                        for (let j = 0; j < headers.length; j++) {
                            const header = headers[j];
                            const cellValue = currentLine[j];
        
                            if (cellValue!='-'){
                                if (columnData[header][cellValue]) {
                                    columnData[header][cellValue] += 1;
                                } else {
                                    columnData[header][cellValue] = 1;
                                }
                            }
                        }
        
                        if (age && sport && age!='-' && sport!='-') {
                            const chiave = `${age}-${sport}`;
                            if (distribuzioneCongiunta[chiave]) {
                                distribuzioneCongiunta[chiave] += 1;
                            } else {
                                distribuzioneCongiunta[chiave] = 1;
                            }
                            joinLines += 1;
                        }
                    }
        
                    var tableAge = document.getElementById("tableAge");
                    var tableSport = document.getElementById("tableSport");
                    var tableHeight = document.getElementById("tableHeight");
                    var tableJoin = document.getElementById("tableJOIN");
        
                    for (var chiave in columnData["Age"]) {
                        if (columnData["Age"].hasOwnProperty(chiave)) {
                            var riga = tableAge.insertRow(tableAge.rows.length);
                            var cellaChiave = riga.insertCell(0);
                            var absoluteFrequenceCell = riga.insertCell(1);
                            var relativeFrequenceCell = riga.insertCell(2);
                            var percentageFrequenceCell = riga.insertCell(3);
                            
        
                            cellaChiave.innerHTML = chiave;
                            absoluteFrequenceCell.innerHTML = columnData["Age"][chiave];
                            relativeFrequenceCell.innerHTML = (columnData["Age"][chiave] / lines.length).toFixed(5);
                            percentageFrequenceCell.innerHTML = ((columnData["Age"][chiave] / lines.length)*100).toFixed(5);
                        }
                    }
        
                    for (var chiave in columnData["Height\r"]) {
                        if (columnData["Height\r"].hasOwnProperty(chiave)) {
                            var riga = tableHeight.insertRow(tableHeight.rows.length);
                            var cellaChiave = riga.insertCell(0);
                            var absoluteFrequenceCell = riga.insertCell(1);
                            var relativeFrequenceCell = riga.insertCell(2);
                            var percentageFrequenceCell = riga.insertCell(3);
        
                            cellaChiave.innerHTML = chiave;
                            absoluteFrequenceCell.innerHTML = columnData["Height\r"][chiave];
                            relativeFrequenceCell.innerHTML = (columnData["Height\r"][chiave] / lines.length).toFixed(5);
                            percentageFrequenceCell.innerHTML = ((columnData["Height\r"][chiave] / lines.length)*100).toFixed(5);
                        }
                    }
        
                    for (var chiave in columnData["Sports"]) {
                        if (columnData["Sports"].hasOwnProperty(chiave)) {
                            var riga = tableSport.insertRow(tableSport.rows.length);
                            var cellaChiave = riga.insertCell(0);
                            var absoluteFrequenceCell = riga.insertCell(1);
                            var relativeFrequenceCell = riga.insertCell(2);
                            var percentageFrequenceCell = riga.insertCell(3);
        
                            cellaChiave.innerHTML = chiave;
                            absoluteFrequenceCell.innerHTML = columnData["Sports"][chiave];
                            relativeFrequenceCell.innerHTML = (columnData["Sports"][chiave] / lines.length).toFixed(5);
                            percentageFrequenceCell.innerHTML = ((columnData["Sports"][chiave] / lines.length)*100).toFixed(5);
                        }
                    }
        
                    for (var chiave in distribuzioneCongiunta) {
                        if (distribuzioneCongiunta.hasOwnProperty(chiave)) {
                            var riga = tableJoin.insertRow(tableJoin.rows.length);
                            var cellaChiave = riga.insertCell(0);
                            var absoluteFrequenceCell = riga.insertCell(1);
                            var relativeFrequenceCell = riga.insertCell(2);
                            var percentageFrequenceCell = riga.insertCell(3);
        
                            cellaChiave.innerHTML = chiave;
                            absoluteFrequenceCell.innerHTML = distribuzioneCongiunta[chiave];
                            relativeFrequenceCell.innerHTML = (distribuzioneCongiunta[chiave] / joinLines).toFixed(5);
                            percentageFrequenceCell.innerHTML = ((distribuzioneCongiunta[chiave] / joinLines) * 100).toFixed(5);
                        }
                    }
        
                    console.log(columnData);
                    console.log(distribuzioneCongiunta);
                })
                .catch(error => console.error('Errore durante il recupero del file CSV:', error));
            </script>
            <style>
                .center-table {
                    margin: 0 auto;
                    text-align: center;
                }
                table {
                    font-family: Arial, sans-serif; /* Cambia il font delle tabelle */
                }
            </style>
        </head>
        
            <div class="container" style="background-color: white; text-align: center; margin-top:7vh;">
                <br>
                <h3>Variable: Age -> quantitative discrete</h3>
                <table class="table table-bordered table-striped center-table" id="tableAge" style="max-width: 60vw; text-align: right;">
                    <tr>
                        <th scope="col" style="text-align: center;"> Age (years) </th>
                        <th scope="col" style="text-align: center;"> Absolute frequence </th>
                        <th scope="col" style="text-align: center;"> Relative frequence </th>
                        <th scope="col" style="text-align: center;"> Percentage frequence </th>
                    </tr>
                </table>
                <br>
                <br>
                <h3>Variable: height -> quantitative continous</h3>
                <table class="table table-bordered table-striped center-table" id="tableHeight" style="max-width: 60vw; text-align: right;">
                    <tr>
                        <th scope="col" style="text-align: center;"> Height (cm) </th>
                        <th scope="col" style="text-align: center;"> Absolute frequence </th>
                        <th scope="col" style="text-align: center;"> Relative frequence </th>
                        <th scope="col" style="text-align: center;"> Percentage frequence </th>
                    </tr>
                </table>
                <br>
                <br>
                <h3>Variable: sport -> qualitative </h3>
                <table class="table table-bordered table-striped center-table" id="tableSport" style="max-width: 60vw; text-align: right;">
                    <tr>
                        <th scope="col" style="text-align: center;"> Sport </th>
                        <th scope="col" style="text-align: center;"> Absolute frequence </th>
                        <th scope="col" style="text-align: center;"> Relative frequence </th>
                        <th scope="col" style="text-align: center;"> Percentage frequence </th>
                    </tr>
                </table>
                <br>
                <br>
                <h3>JOIN DISTRIBUTION: sport and age </h3>
                <table class="table table-bordered table-striped center-table" id="tableJOIN" style="max-width: 60vw; text-align: right;">
                    <tr>
                        <th scope="col" style="text-align: center;"> Age - Sport </th>
                        <th scope="col" style="text-align: center;"> Absolute frequence </th>
                        <th scope="col" style="text-align: center;"> Relative frequence </th>
                        <th scope="col" style="text-align: center;"> Percentage frequence </th>
                    </tr>
                </table>
                <br>
                <br>
                <button type="button" class="btn btn-success" style="text-align: center;">
                    <a href="https://github.com/antoniomiloro/Statistics/blob/main/pages/homework2.html" style="color: white;"> View Code </a>
                </button>
                <br>
                <br>
            </div>
        
        <h4>C#</h4>
        <pre>
            <code>
                using System;
                using System.Diagnostics.Eventing.Reader;
                using System.DirectoryServices;
                using System.Drawing.Drawing2D;
                using static System.Windows.Forms.VisualStyles.VisualStyleElement;
                
                namespace hw2
                {
                    public partial class Form1
                    {
                        string[,] matrix;
                        int numCols;
                        int numRows;
                
                        Dictionary<string, int> jointDistribution;
                        public Form1()
                        {
                            InitializeComponent();
                        }
                
                        private string[,] ReadTsvFileIntoMatrix(string path)
                        {
                            // read the file
                            string[] lines = File.ReadAllLines(path);
                
                            int numRows = lines.Length;
                            int numCols = lines[0].Split('\t').Length;
                
                            string[,] matrix = new string[numRows, numCols];
                
                            for (int i = 0; i < numRows; i++)
                            {
                                string[] splits = lines[i].Split('\t');
                                for (int j = 0; j < numCols; j++)
                                {
                                    matrix[i, j] = splits[j];
                                }
                            }
                
                            return matrix;
                        }
                
                        private void buttonGetTsvFile_Click(object sender, EventArgs e)
                        {
                            matrix = ReadTsvFileIntoMatrix("Professional Life - Sheet1.tsv");
                
                            numCols = matrix.GetLength(1);
                            numRows = matrix.GetLength(0);
                
                            for (int j = 1; j < numCols; j++)
                            {
                                comboBoxUnivaried.Items.Add(matrix[0, j]);
                            }
                
                            buttonuUnivaried.Enabled = true;
                            buttonMultivaried.Enabled = true;
                            comboBoxUnivaried.Enabled = true;
                            comboBoxUnivaried.SelectedIndex = 0;
                        }
                
                        private void buttonUnivaried_Click(object sender, EventArgs e)
                        {
                            // TODO: make it so you can select these
                            string[] var = { comboBoxUnivaried.SelectedItem.ToString() };
                
                            Dictionary<string, int> distribution = evalDistribution(var);
                
                            printDistribution(distribution);
                        }
                
                        private void printDistribution(Dictionary<string, int> distribution)
                        {
                            int entries = distribution.Values.Sum();
                
                            textBox1.Text = "";
                            decimal relativeFreq;
                            decimal percentage;
                            foreach (KeyValuePair<string, int> kvp in distribution)
                            {
                                relativeFreq = Math.Round((decimal)kvp.Value / (decimal)entries, 4);
                                percentage = Math.Round(relativeFreq * 100, 2);
                
                                textBox1.Text += $"{kvp.Key}: \t {kvp.Value} ({relativeFreq} {percentage}%)\r\n";
                            }
                
                        }
                
                        private void buttonMultivaried_Click(object sender, EventArgs e)
                        {
                            string[] variables = textBoxMultivaried.Text.Split(',').Select(variable => variable.Trim()).ToArray();
                
                            if (variables[0] == "")
                                return;
                
                            Dictionary<string, int> jointDistribution = evalDistribution(variables);
                
                            printDistribution(jointDistribution);
                        }
                
                        // works for multivaried and univaried
                        private Dictionary<string, int> evalDistribution(string[] variables)
                        {
                            jointDistribution = new Dictionary<string, int>();
                
                            int[] varColumns = new int[variables.Length];
                            for (int i = 0; i < variables.Length; i++)
                            {
                                for (int j = 0; j < numCols; j++)
                                {
                                    if (matrix[0, j] == variables[i])
                                    {
                                        varColumns[i] = j;
                                        break;
                                    }
                                }
                            }
                
                            string[][] valuesMatrix = new string[varColumns.Length][];
                            string jointValue;
                
                            for (int i = 1; i < numRows; i++)
                            {
                                valuesMatrix[0] = matrix[i, varColumns[0]].ToLower().Trim('"').Trim(' ').Trim(',').Split(',');
                                for (int k = 1; k < varColumns.Length; k++)
                                {
                                    valuesMatrix[k] = matrix[i, varColumns[k]].ToLower().Trim('"').Trim(' ').Trim(',').Split(',');
                                }
                
                                var combinations = CartesianProduct(valuesMatrix);
                                foreach (var combination in combinations)
                                {
                                    jointValue = String.Join(", ", combination);
                
                                    if (!jointDistribution.ContainsKey(jointValue)) jointDistribution[jointValue] = 1;
                                    else jointDistribution[jointValue]++;
                                }
                
                            }
                
                            return jointDistribution;
                        }
                        private static IEnumerable<string[]> CartesianProduct(string[][] items)
                        {
                            string[] currentItem = new string[items.Length];
                            static IEnumerable<string[]> Go(string[][] items, string[] currentItem, int index)
                            {
                                if (index == items.Length)
                                {
                                    yield return (string[])currentItem.Clone();
                                }
                                else
                                {
                                    foreach (string item in items[index])
                                    {
                                        currentItem[index] = item.ToString();
                                        foreach (string[] j in Go(items, currentItem, index + 1))
                                        {
                                            yield return (string[])j.Clone();
                                        }
                                    }
                                }
                            }
                            return Go(items, currentItem, 0);
                        }
                    }
                }
            </code>
        </pre>



        <h1>Esercizio 2</h1> 
        <h4>Cheatsheet C#</h4>
            <pre>
                <code>
                    using System;
                    using System.Collections.Generic;
                    using System.Collections;
                    
                    namespace data_structures_cheatsheet
                    {
                        public partial class Form1 : Form
                        {
                            public Form1()
                            {
                                InitializeComponent();
                            }
                    
                            private void Form1_Load(object sender, EventArgs e)
                            {
                                
                            /*ARRAY*/
                            int[] array = new int[5];
 
                            // add elements
                            array[0] = 1;
                            array[1] = 2;
                            array[2] = 3;
                            array[3] = 4;
                            array[4] = 5;
                
                            // loop
                            foreach (var item in array)
                            {
                                Console.WriteLine(item);
                            }
                
                            // remove elements 
                            int removeIndex = 2;
                            int[] newArray = new int[4];
                            for(int i = 0; i < newArray.Length; i++)
                            {
                                if (i == removeIndex) continue;
                
                                newArray[i] = array[i];
                            }
                
                            // check existance
                            array.Contains(0);
                
                            // retreive elements
                            Console.WriteLine(array[0]);
                            Console.WriteLine(array[1]);
 


                            /*SORTED LIST*/
                            // initialization
                            SortedList sl = new SortedList();
                
                            // add elements
                            sl.Add("a", 1);
                            sl.Add("b", 6);
                            sl.Add("c", 0);
                            sl.Add("d", 0);
                
                            // loop 
                            foreach (DictionaryEntry pair in sl)
                                Console.WriteLine("{0} and {1}", pair.Key, pair.Value);
                
                            // remove elements 
                            sl.Remove(6);
                            sl.Remove(0);
                
                            // check existance
                            sl.ContainsKey(0);
                
                            // retreive elements
                            Console.WriteLine(sl["a"]);
                            Console.WriteLine(sl["b"]);
 


                            /*DICTIONARY*/
                            // initialization
                            Dictionary<string, int> dict = new Dictionary<string, int>();
                
                            // add elements
                            dict.Add("Age", 23);
                            dict.Add("Height", 172);
                
                            // loop
                            foreach(KeyValuePair<string, int> kvp in dict)
                                Console.WriteLine("{0} and {1}", kvp.Key, kvp.Value);
                
                            // remove elements 
                            dict.Remove("Age");
                            dict.Remove("Height");
                
                            // check existance
                            dict.ContainsKey("Age");
                
                            // retreive elements
                            Console.WriteLine(dict["Age"]);
                            Console.WriteLine(dict["Height"]);
 
 

                            /*HASH SET*/
                            // initialization
                            HashSet<int> hs = new HashSet<int>();
                
                            // add elements
                            hs.Add(1);
                            hs.Add(64);
                            hs.Add(128);
                
                            // loop 
                            foreach(int i in hs)
                                Console.WriteLine(i);
                
                            // remove elements 
                            hs.Remove(1);      
                            hs.Remove(64);   
                
                            // check existance
                            hs.Contains(1);
                
                            // retreive elements
                            Console.WriteLine();
                
 

                            /*STACK*/
                            // initialization
                            var stack = new Stack();
                
                            // add elements
                            stack.Push(1);
                            stack.Push(6);
                            stack.Push(0);
                            stack.Push(0);
                
                            // loop 
                            foreach (Object o in stack)
                                Console.WriteLine(o);
                
                            // remove elements 
                            stack.Pop();
                
                            // check existance
                            stack.Contains(0);
                
                            //retreive element
                            Console.WriteLine(stack.Peek());
 
 

                            /*QUEUE*/
                            // initialization
                            var queue = new Queue();
                
                            // add elements
                            queue.Enqueue(1);
                            queue.Enqueue(6);
                            queue.Enqueue(0);
                            queue.Enqueue(0);
                
                            // loop 
                            foreach (Object o in queue)
                                Console.WriteLine(o);
                
                            // remove elements 
                            queue.Dequeue();
                            queue.Dequeue();
                
                            // check existance
                            queue.Contains(0);
                
                            // retreive elements
                            Console.WriteLine(queue.Peek());
 
 
 
                            /* LINKED LIST */
                            // initialization
                            LinkedList<int> ll = new LinkedList<int>();
                
                            // add elements
                            ll.AddLast(1);
                            ll.AddFirst(6);
                            ll.AddAfter(ll.Find(6), 4);
                
                            // loop
                            foreach (int str in ll)
                            {
                                Console.WriteLine(str);
                            }
                
                            // remove elements
                            ll.RemoveLast();
                            ll.RemoveFirst();
                
                            // check existance
                            ll.Find(7);
                
                            // retrieve elements
                            Console.WriteLine(ll.Find(4));
                            }
                        }           
                    }

                </code>
            </pre>

        <h4>Cheatsheet JavaScript</h4>
            <pre>
                <code>
                    /* ARRAY AND LISTS */
                    // initialization
                    var array = [];
                    
                    // add elements
                    array.push(1);
                    array.push(6);
                    array.push(0);
                    array.push(0);
                    
                    // loop 
                    array.forEach((value) =>{
                        console.log(value);
                    })
                    
                    // remove elements 
                    array.pop();       
                    array.slice(2, 1)   
                    
                    // check existance
                    array.includes(0);
                    
                    // retreive elements
                    console.log(array[0]);
                    console.log(array[1]);
                    
                    
                    
                    /*SORTED LIST*/
                    // initialization
                    var sl = new SortedList();
                    
                    // add elements
                    sl.insert(1);
                    sl.insert(6);
                    sl.insert(0);
                    sl.insert(0);
                    
                    // loop 
                    console.log("sorted list = [" + sl.print() + "]");
                    
                    // remove elements 
                    sl.remove(6)  
                    sl.remove(0)  
                    
                    // check existance
                    sl.exists(0);
                    
                    // retreive elements
                    console.log(array[0]);
                    console.log(array[1]);
                    
                    
                                        
                    /*DICTIONARY*/  
                    // initialization
                    var dict = {};
                    
                    // add elements
                    dict["Age"] = 23;
                    dict.Height = 172;
                    
                    // loop 
                    for (var key in dict) { 
                        console.log(dict[key])
                    }
                    
                    // remove elements 
                    delete "Age";
                    delete dict.Height;
                    
                    // check existance
                    dict.hasOwnProperty('Age');
                    
                    // retreive elements
                    console.log(dict["Age"]);
                    console.log(dict.Height);
                    
                    
                    
                    /*HASH SET*/
                    // initialization
                    var set = new Set();
                    
                    // add elements
                    set.add(1);
                    set.add("cat")
                    set.add({Age: 23, Height: 173});
                    
                    // loop 
                    set.forEach((value) =>{
                        console.log(value);
                    })
                    
                    // remove elements 
                    set.delete(1);        // at the bottom
                    set.delete("cat")   // remvove second element 
                    
                    // check existance
                    set.has(1);
                    
                    // retreive elements
                    console.log(set);
                    
                    
                        
                    /*STACK*/
                    // initialization
                    var stack = new Stack();
                    
                    // add elements
                    stack.push(1);
                    stack.push(6);
                    stack.push(0);
                    stack.push(0);
                    
                    // loop 
                    stack.print();
                    
                    // remove elements 
                    stack.pop();       
                    
                    // check existance
                    stack.exists(0);
                    
                    //retreive element
                    stack.peek();
                    
                        
                    
                    /*QUEUE*/ 
                    // initialization
                    var queue = new Queue();
                    
                    // add elements
                    queue.enqueue(1);
                    queue.enqueue(6);
                    queue.enqueue(0);
                    queue.enqueue(0);
                    
                    // loop 
                    queue.print();
                    
                    // remove elements 
                    queue.dequeue();
                    queue.dequeue();
                    
                    // check existance
                    queue.exists(0);
                    
                    // retreive elements
                    console.log(queue.front());
                    
                    
                            
                    /* LINKED LIST */      
                    // initialization
                    var linkedList = new LinkedList();
                    
                    // add elements
                    linkedList.add(1);
                    linkedList.add(6);
                    linkedList.add(0);
                    
                    // loop
                    linkedList.print();
                    
                    // remove elements
                    linkedList.removeElement(0);
                    linkedList.removeElement(6);
                    
                    // check existance
                    linkedList.exists(0);
                    
                    // retrieve elements
                    console.log(linkedList.retrieve(2))

                </code>
            </pre>
        <h1>Esercizio 3</h1> 
        <head>
            <title>Uniform Random Variates Distribution</title>
            <style>
                .input-container {
                    display: flex;
                    align-items: center;
                }
                .input-container label, .input-container input, .input-container button {
                    margin-right: 10px;
                }
                .histogram-bar {
                    border-right: 1px solid #fff; /* Aggiunge un bordo destro alle barre */
                }
            </style>
        </head>
        <body>
            <div class="input-container">
                <label for="nInput">N:</label>
                <input type="number" id="nInput" value="10000">
                <label for="kInput">k:</label>
                <input type="number" id="kInput" value="10">
                <button onclick="updateHistogram()">Genera</button>
            </div>
            <canvas id="histogram" width="400" height="300"></canvas>

            <script>
                // Funzione per generare e disegnare l'istogramma
                function updateHistogram() {
                    const N = parseInt(document.getElementById("nInput").value);
                    const k = parseInt(document.getElementById("kInput").value);

                    // Genera N random variates
                    const data = Array.from({ length: N }, () => Math.random());

                    // Calcola l'istogramma
                    const histogram = Array.from({ length: k }, (_, i) => {
                        const lowerBound = i / k;
                        const upperBound = (i + 1) / k;
                        return data.filter(value => value >= lowerBound && value < upperBound).length / N;
                    });

                    // Ottieni il canvas
                    const canvas = document.getElementById("histogram");
                    const context = canvas.getContext("2d");

                    // Prepara il canvas per il disegno
                    const canvasWidth = canvas.width;
                    const canvasHeight = canvas.height;
                    context.clearRect(0, 0, canvasWidth, canvasHeight);
                    context.fillStyle = "blue";
                    context.font = "12px Arial";

                    // Disegna l'istogramma
                    for (let i = 0; i < k; i++) {
                        const barHeight = canvasHeight * histogram[i];
                        const barWidth = canvasWidth / k;
                        const x = i * barWidth;
                        const y = canvasHeight - barHeight;

                        // Disegna la barra con il bordo
                        context.fillRect(x, y, barWidth, barHeight);
                        context.strokeRect(x, y, barWidth, barHeight);

                        context.fillText(`${(i / k).toFixed(2)}-${((i + 1) / k).toFixed(2)}`, x, canvasHeight - 5);
                    }
                }

                // Genera e disegna l'istogramma all'avvio della pagina
                updateHistogram();
            </script>
        </body>

        

    </body>
</html>