<!DOCTYPE html>
<html>
    <head>
        <title>Statistics</title>
        <meta http-equiv='cache-control' content='no-cache'> 
        <meta http-equiv='expires' content='0'> 
        <meta http-equiv='pragma' content='no-cache'>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    </head>
    <body>
        <h1>Esercizio 1</h1> 
        <h3>1. Choose 3 variables from our surveys: <br>
            - one Qualitative <br>
            - one Quantitative discrete <br>
            - one Quantitative continuous (use class intervals in this case, obviously) <br>
            
            create the most efficient algorithms to compute the frequency (absolute/relative/percentage) distribution of: <br>
            
            - the 3 variables <br>
            - the joint distribution of 2 variables</h3>
        <h4>C# program</h4>
        <pre>
            <code>
                using System;
                using System.Collections.Generic;
                using System.IO;
                using System.Linq;

                class Program
                {
                    static void Main()
                    {
                        string projectDirectory = "YOUR PROJECT DIRECTORY";
                        
                        string degreesPath = Path.Combine(projectDirectory, "degrees.txt");
                        string ambitiousnessPath = Path.Combine(projectDirectory, "ambitiousness.txt");
                        string heightsPath = Path.Combine(projectDirectory, "heights.txt");

                        string degreesData = File.ReadAllText(degreesPath);
                        string ambitiousnessData = File.ReadAllText(ambitiousnessPath);
                        string heightsData = File.ReadAllText(heightsPath);

                        Dictionary heightsFrequencies = CalculateFrequencies(heightsData);
                        PrintFrequencies(heightsFrequencies, "---Height Frequencies---");

                        Dictionary degreesFrequencies = CalculateFrequencies(degreesData);
                        PrintFrequencies(degreesFrequencies, "---Background Degree Frequencies---");

                        Dictionary ambitiousnessFrequencies = CalculateFrequencies(ambitiousnessData);
                        PrintFrequencies(ambitiousnessFrequencies, "---Ambitious Values Frequencies---");

                        List dataArrays = new List
                        {
                            ambitiousnessData.Split('\n'),
                            heightsData.Split('\n')
                        };

                        Dictionary jointDistribution = CalculateJointDistribution(dataArrays);
                        PrintJointDistribution(jointDistribution, "---Joint Distribution of Ambitiousness and Height (Data: A | H)---");

                        dataArrays.Add(degreesData.Split('\n'));

                        Dictionary jointDistributions = CalculateJointDistribution(dataArrays);
                        PrintJointDistribution(jointDistributions, "---Joint Distribution OF 3 VARIABLES---");
                    }

                    static Dictionary CalculateFrequencies(string text)
                    {
                        var frequencies = new Dictionary();
                        var lines = text.Split('\n');

                        foreach (var line in lines)
                        {
                            var item = line.ToLower().Trim();

                            if (frequencies.ContainsKey(item))
                            {
                                frequencies[item]++;
                            }
                            else
                            {
                                frequencies[item] = 1;
                            }
                        }

                        return frequencies;
                    }

                    static void PrintFrequencies(Dictionary frequencies, string title)
                    {
                        Console.WriteLine($"\n{title}\n");
                        int total = frequencies.Values.Sum();

                        foreach (var item in frequencies)
                        {
                            double relativeFrequency = (double)item.Value / total;
                            double percentage = relativeFrequency * 100;
                            Console.WriteLine($"{item.Key}: {item.Value} (Relative: {relativeFrequency:F2}, Percentage: {percentage:F2}%)");
                        }
                    }

                    static Dictionary CalculateJointDistribution(List dataArrays)
                    {
                        var jointDistribution = new Dictionary();
                        int numVariables = dataArrays.Count;

                        for (int i = 0; i < dataArrays[0].Length; i++)
                        {
                            var values = dataArrays.Select(dataArray => dataArray[i].ToLower().Trim()).ToList();
                            var key = string.Join("|", values);

                            if (jointDistribution.ContainsKey(key))
                            {
                                jointDistribution[key]++;
                            }
                            else
                            {
                                jointDistribution[key] = 1;
                            }
                        }

                        return jointDistribution;
                    }

                    static void PrintJointDistribution(Dictionary jointDistribution, string title)
                    {
                        Console.WriteLine($"\n{title}\n");
                        int total = jointDistribution.Values.Sum();

                        foreach (var item in jointDistribution)
                        {
                            var values = item.Key.Split('|');
                            double relativeFrequency = (double)item.Value / total;
                            double percentage = relativeFrequency * 100;
                            Console.WriteLine($"Data: {string.Join(", ", values)} \t Frequency: {item.Value}, Relative Frequency: {relativeFrequency:F2}, Percentage: {percentage:F2}%");
                        }
                    }
                }

            </code>
        </pre>

        <br><br><br>
        <h1>Esercizio 2</h1> 
        <h5>To view the code of Cheatsheet, visit the page: <a href="./cheatsheet.html">Cheatsheet</a></h5>
        
        <br><br><br>
        <h1>Esercizio 3</h1> 
        <head>
            <h4>JavaScript Code for Generating Uniform Random Variates and Analyzing Distribution</h4>
            <style>
                .input-container {
                    display: flex;
                    align-items: center;
                }
                .input-container label, .input-container input, .input-container button {
                    margin-right: 10px;
                }
                .histogram-bar {
                    border-right: 1px solid #fff; /* Aggiunge un bordo destro alle barre */
                }
            </style>
        </head>
        <body>
            <div class="input-container">
                <label for="nInput">N:</label>
                <input type="number" id="nInput" value="100">
                <label for="kInput">k:</label>
                <input type="number" id="kInput" value="10">
                <button onclick="updateHistogram()">Genera</button>
            </div>
            <canvas id="histogram" width="400" height="300"></canvas>

            <script>
                // Funzione per generare e disegnare l'istogramma
                function updateHistogram() {
                    const N = parseInt(document.getElementById("nInput").value);
                    const k = parseInt(document.getElementById("kInput").value);

                    // Genera N random variates
                    const data = Array.from({ length: N }, () => Math.random());

                    // Calcola l'istogramma
                    const histogram = Array.from({ length: k }, (_, i) => {
                        const lowerBound = i / k;
                        const upperBound = (i + 1) / k;
                        return data.filter(value => value >= lowerBound && value < upperBound).length / N;
                    });

                    // Ottieni il canvas
                    const canvas = document.getElementById("histogram");
                    const context = canvas.getContext("2d");

                    // Prepara il canvas per il disegno
                    const canvasWidth = canvas.width;
                    const canvasHeight = canvas.height;
                    context.clearRect(0, 0, canvasWidth, canvasHeight);
                    context.fillStyle = "blue";
                    context.font = "12px Arial";

                    // Disegna l'istogramma
                    for (let i = 0; i < k; i++) {
                        const barHeight = canvasHeight * histogram[i];
                        const barWidth = canvasWidth / k;
                        const x = i * barWidth;
                        const y = canvasHeight - barHeight;

                        // Disegna la barra con il bordo
                        context.fillRect(x, y, barWidth, barHeight);
                        context.strokeRect(x, y, barWidth, barHeight);

                        context.fillText(`${(i / k).toFixed(2)}-${((i + 1) / k).toFixed(2)}`, x, canvasHeight - 5);
                    }
                }

                // Genera e disegna l'istogramma all'avvio della pagina
                updateHistogram();
            </script>
        </body>

        <br><br><br>

        <head>
            <style>
                table {
                    border-collapse: collapse;
                    width: 50%;
                }
                th, td {
                    border: 1px solid black;
                    text-align: center;
                    padding: 8px;
                }
            </style>
        </head>
        <body>
            <h4>C# Code for Generating Uniform Random Variates and Analyzing Distribution</h4>

            <table>
                <tr>
                    <th>Step</th>
                    <th>Code</th>
                </tr>
                <tr>
                    <td>1</td>
                    <td>
                        <pre>
                            using System;
                            using System.Collections.Generic;

                            class Program
                            {
                                static void Main()
                                {
                                    int N = 1000; // Number of random variates
                                    int k = 10;   // Number of class intervals

                                    Random random = new Random();
                                    List&lt;double&gt; randomNumbers = new List&lt;double&gt;();

                                    // Generate N random numbers between 0 and 1
                                    for (int i = 0; i &lt; N; i++)
                                    {
                                        double randomNumber = random.NextDouble();
                                        randomNumbers.Add(randomNumber);
                                    }

                                    // Create an array to count the frequency of each interval
                                    int[] intervalCount = new int[k];

                                    // Determine the distribution into class intervals
                                    for (int i = 0; i &lt; N; i++)
                                    {
                                        int intervalIndex = (int)(randomNumbers[i] * k);
                                        intervalCount[intervalIndex]++;
                                    }

                                    // Calculate the relative frequency of each interval
                                    for (int i = 0; i &lt; k; i++)
                                    {
                                        double relativeFrequency = (double)intervalCount[i] / N;
                                        Console.WriteLine($"Interval {i}: {relativeFrequency:P}");
                                    }
                                }
                            }
                        </pre>
                    </td>
                </tr>
            </table>
        </body>

  

    </body>
</html>